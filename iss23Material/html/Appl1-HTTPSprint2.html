
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Appl1-HTTPSprint2 &#8212; iss23 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Appl1-HTTPSprint3" href="Appl1-HTTPSprint3.html" />
    <link rel="prev" title="Appl1-HTTPSprint1" href="Appl1-HTTPSprint1.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Appl1-HTTPSprint3.html" title="Appl1-HTTPSprint3"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Appl1-HTTPSprint1.html" title="Appl1-HTTPSprint1"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">iss23 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Appl1-HTTPSprint2</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="appl1-httpsprint2">
<h1>Appl1-HTTPSprint2<a class="headerlink" href="#appl1-httpsprint2" title="Permalink to this headline">¶</a></h1>
<p>Dopo lo <a class="reference internal" href="Appl1-HTTPSprint1.html#appl1-httpsprint1"><span class="std std-ref">Appl1-HTTPSprint1</span></a>, abbiamo a disposizione i seguenti ‘proodotti’:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Appl1-HTTPSprint1.html#unibo-http-appl1httpsprint1"><span class="std std-ref">unibo.http.Appl1HTTPSprint1</span></a>, un programma che realizza il <a class="reference internal" href="Appl1-HTTPSprint1.html#requisito-sprint1-il-core-problem"><span class="std std-ref">core applicativo</span></a></p></li>
<li><p><a class="reference internal" href="Appl1-HTTPSprint1.html#testappl1httpsprint1"><span class="std std-ref">TestAppl1HTTPSprint1</span></a>, che fornisce un test automatizzato per il <em>core applicativo</em></p></li>
</ul>
<section id="overview-di-appl1-httpsprint2">
<h2>Overview di Appl1-HTTPSprint2<a class="headerlink" href="#overview-di-appl1-httpsprint2" title="Permalink to this headline">¶</a></h2>
<p>In quest Sprint affrontiamo il problema della <span class="remark">gestione dei comandi stop/resume</span>,
introducendo</p>
<p><span class="slide">un POJO per la logica applicativa</span></p>
<section id="requisito-sprint2-stop-resume">
<h3>Requisito SPRINT2: stop/resume<a class="headerlink" href="#requisito-sprint2-stop-resume" title="Permalink to this headline">¶</a></h3>
<p>Il nuovo requisito impone che la logica applicativa:</p>
<ul class="simple">
<li><p>realizzi una fase <span class="remark">reattiva</span>, in cui
il robot deve poter gestire i comandi <em>stop/resume</em> mentre sta percorrendo il perimetro della stanza.</p></li>
<li><p>sia predisposta ad operare in seguito a comandi inviati da <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#cmdconsole"><span class="std std-ref">CmdConsole</span></a>.</p></li>
</ul>
<p>In questo Sprint:</p>
<ul class="simple">
<li><p>fissiamo il <span class="blue">requisito non funzionale</span> di racchiudere
la logica applicativa in un <strong>singolo POJO</strong> (si veda <a class="reference external" href="https://it.wikipedia.org/wiki/Plain_Old_Java_Object">https://it.wikipedia.org/wiki/Plain_Old_Java_Object</a>),
scorporandola dal main program.
Ciò allo scopo di poter risuare questo ogetto come una risorsa in future applicazioni.</p></li>
<li><p><span class="blue">evitiamo la complessità della distribuzione</span>, sostituendo la Console remota con
un simulatore prima e una Console locale poi.</p></li>
</ul>
<p>Procederemo come segue:</p>
<ol class="arabic">
<li><p>Definiamo il POJO <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a>, con la responsaibilità di realizzare la logica applicativa.
Questo POJO implementa l’interfaccia <a class="reference internal" href="#unibo-appl1-common-iappl1core"><span class="std std-ref">IAppl1Core</span></a>.</p></li>
<li><p>Definiamo un <span class="blue">simulatore della Console</span> per inviare comandi in ambiente locale,
producendo: <a class="reference internal" href="#unibo-console-cmdconsolesimulator"><span class="std std-ref">unibo.console.CmdConsoleSimulator</span></a>.
L’architettura del sistema a questo punto diventa:</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/Appl1HTTPSprint2Arch.png"><img alt="_images/Appl1HTTPSprint2Arch.png" src="_images/Appl1HTTPSprint2Arch.png" style="width: 70%;" /></a>
</div></blockquote>
</li>
<li><p>Affrontiamo  il <span class="blue">problema stop/resume</span>, usando l’operazione di alto livello <a class="reference internal" href="Appl1-HTTPSprint1.html#step"><span class="std std-ref">step</span></a>, definendo
una versione di <a class="reference internal" href="Appl1-HTTPSprint1.html#walkbystepping"><span class="std std-ref">walkByStepping</span></a> denominata <a class="reference internal" href="#id1"><span class="std std-ref">walkBySteppingWithStop</span></a>,
che rende <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> reattivo  a un comando di <code class="docutils literal notranslate"><span class="pre">stop</span></code>:</p></li>
<li><p>Definiamo il main program dello Sprint2 <a class="reference internal" href="#unibo-appl1-http-appl1httpsprint2"><span class="std std-ref">unibo.appl1.http.Appl1HTTPSprint2</span></a>
come un <span class="blue">configuratore del sistema</span></p></li>
<li><p>Definiamo una Console locale <a class="reference internal" href="#unibo-console-gui-appl1httpsprint2cmdconsole"><span class="std std-ref">unibo.console.gui.Appl1HttpSprint2CmdConsole</span></a></p></li>
<li><p>Impostiamo il testing dell’applicazione sul concetto di <span class="slide1">osservabilità</span>,
definendo il POJO <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a>  come un oggetto <span class="blue">osservabile</span>.</p></li>
<li><p>Definiamo una JUnit per il testing <a class="reference internal" href="#unibo-appl1-http-testappl1httpsprint2"><span class="std std-ref">unibo.appl1.http.TestAppl1HTTPSprint2</span></a>
utilizzando un observer: <span class="xref std std-ref">unibo.appl1.common.Appl1Observer</span>.</p></li>
</ol>
<p><span class="slide1">Applicazione come POJO</span></p>
</section>
</section>
<section id="appl1core">
<h2>Appl1Core<a class="headerlink" href="#appl1core" title="Permalink to this headline">¶</a></h2>
<p>Se racchiudiamo la logica applicativa in un POJO, allora è opportuno definire il contratto con i
suoi utlizzatori in termini di una interfaccia Java.</p>
<section id="unibo-appl1-common-iappl1core">
<h3>unibo.appl1.common.IAppl1Core<a class="headerlink" href="#unibo-appl1-common-iappl1core" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">interface</span> <span class="n">IAppl1Core</span> <span class="p">{</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">start</span><span class="p">()</span> <span class="n">throws</span> <span class="ne">Exception</span><span class="p">;</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">stop</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">resume</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="unibo-appl1-http-appl1core">
<h3>unibo.appl1.http.Appl1Core<a class="headerlink" href="#unibo-appl1-http-appl1core" title="Permalink to this headline">¶</a></h3>
<p>In fase di costruzione/configurazione, il POJO applicativo crea
un supporto <a class="reference internal" href="Appl1-HTTPSprint1.html#unibo-supports-vrobothlmoveshttpapache"><span class="std std-ref">HTTPCommApache</span></a>
che implementa le operazioni di alto livello con il robot
definite in <a class="reference internal" href="Appl1-HTTPSprint1.html#unibo-common-ivrobotmoves"><span class="std std-ref">IVrobotMoves</span></a>, che abbiamo introdotto nello
<a class="reference internal" href="Appl1-HTTPSprint1.html#comunicazioni-di-alto-livello-col-robot"><span class="std std-ref">Sprint1</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span> <span class="nc">Appl1Core</span> <span class="n">implements</span> <span class="n">IAppl1Core</span><span class="p">{</span>
<span class="n">protected</span> <span class="n">boolean</span> <span class="n">stopped</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">protected</span> <span class="n">IVrobotMoves</span> <span class="n">vr</span> <span class="p">;</span>

<span class="n">public</span> <span class="n">Appl1Core</span><span class="p">(){</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="n">configure</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">protected</span> <span class="n">void</span> <span class="n">configure</span><span class="p">(){</span>
    <span class="n">String</span> <span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;localhost:8090/api/move&quot;</span><span class="p">;</span>
    <span class="o">//</span><span class="n">URL</span> <span class="n">potrebbe</span> <span class="n">essere</span> <span class="n">letto</span> <span class="n">da</span> <span class="n">un</span> <span class="n">file</span> <span class="n">di</span> <span class="n">configurazione</span>
    <span class="n">HTTPCommApache</span> <span class="n">httpSupport</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HTTPCommApache</span><span class="p">(</span>  <span class="n">URL</span> <span class="p">);</span>
    <span class="n">vr</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VrobotHLMovesHTTPApache</span><span class="p">(</span> <span class="n">httpSupport</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/Appl1HTTPSprint2ArchWthSupport.png"><img alt="_images/Appl1HTTPSprint2ArchWthSupport.png" class="align-center" src="_images/Appl1HTTPSprint2ArchWthSupport.png" style="width: 40%;" /></a>
<section id="start">
<h4>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h4>
<p>Il metodo <code class="docutils literal notranslate"><span class="pre">start</span></code> attiva l’operazione <code class="docutils literal notranslate"><span class="pre">walkAtBoundary</span></code> che risolve
<a class="reference internal" href="Appl1-HTTPSprint1.html#requisito-sprint1-il-core-problem"><span class="std std-ref">il core problem</span></a> applicativo.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>public void start() throws Exception{
  if( ! started ){
    started = true;
    walkAtBoundary();
  }else CommUtils.outred(&quot;Application already started&quot;);
}

private void walkAtBoundary() throws Exception {
    for( int i=1; i&lt;=4;i++) {
        walkBySteppingWithStop(i);
        vr.turnLeft();
    }
}
</pre></div>
</div>
<p><span class="slide1">step=mossa elementare atomica</span></p>
<p>Realizzare il movimento del robot usando <a class="reference internal" href="Appl1-HTTPSprint1.html#step"><span class="std std-ref">step</span></a> permette di impostare agevolmente
una soluzione al problema <code class="docutils literal notranslate"><span class="pre">stop/resume</span></code>,
inserendo un test di controllo tra uno <em>step</em> e l’altro. Lo <a class="reference internal" href="Appl1-HTTPSprint1.html#step"><span class="std std-ref">step</span></a> diventa la mossa elementare di movimento non
interrompibile.</p>
<p>Per questo abbiamo modificato il metodo <a class="reference internal" href="Appl1-HTTPSprint1.html#walkbystepping"><span class="std std-ref">walkByStepping</span></a> nel metodo <a class="reference internal" href="#id1"><span class="std std-ref">walkBySteppingWithStop</span></a>,
in modo da rederlo sensibile a un comando di <code class="docutils literal notranslate"><span class="pre">stop</span></code>.</p>
</section>
</section>
<section id="walkbysteppingwithstop">
<h3>walkBySteppingWithStop<a class="headerlink" href="#walkbysteppingwithstop" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">walkBySteppingWithStop</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
    <span class="kt">boolean</span> <span class="n">stepOk</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">stepOk</span>  <span class="p">)</span> <span class="p">{</span>
        <span class="n">stepOk</span> <span class="o">=</span>  <span class="n">vr</span><span class="p">.</span><span class="na">step</span><span class="p">(</span><span class="mi">350</span><span class="p">);</span>
        <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span> <span class="c1">//to show the steps better</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">stopped</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">waitResume</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">waitResume</span><span class="p">(){</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">stopped</span> <span class="p">){</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">wait</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{...</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La variabile <code class="docutils literal notranslate"><span class="pre">stopped</span></code> viene posta <code class="docutils literal notranslate"><span class="pre">true</span></code> alla ricezione di una comando di <code class="docutils literal notranslate"><span class="pre">stop</span></code> e dovrà essere
resettata a <code class="docutils literal notranslate"><span class="pre">false</span></code> alla ricezione di una comando di <code class="docutils literal notranslate"><span class="pre">resume</span></code>.</p>
</section>
<section id="stop">
<h3>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span>  <span class="kt">void</span> <span class="nf">stop</span><span class="p">(</span>  <span class="p">)</span> <span class="p">{</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">vr</span><span class="p">.</span><span class="na">halt</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{...);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="resume">
<h3>resume<a class="headerlink" href="#resume" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">resume</span><span class="p">(</span>  <span class="p">){</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="n">notifyAll</span><span class="p">();</span>  <span class="c1">//riattiva waitResume</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="unibo-appl1-http-appl1httpsprint2">
<h3>unibo.appl1.http.Appl1HTTPSprint2<a class="headerlink" href="#unibo-appl1-http-appl1httpsprint2" title="Permalink to this headline">¶</a></h3>
<p>Il <span class="remark">main program diventa ora un configuratore</span> del sistema.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="k">class</span> <span class="nc">Appl1HTTPSprint2</span> <span class="p">{</span>
<span class="n">private</span> <span class="n">Appl1Core</span> <span class="n">appl1Core</span><span class="p">;</span>
<span class="n">private</span> <span class="n">CmdConsoleSimulator</span> <span class="n">cmdConsole</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">Appl1HTTPSprint2</span><span class="p">(){</span>
        <span class="n">configureTheSystem</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">void</span> <span class="n">configureTheSystem</span><span class="p">(){</span>
        <span class="n">appl1Core</span>  <span class="o">=</span> <span class="n">new</span> <span class="n">Appl1Core</span><span class="p">();</span>
        <span class="n">cmdConsole</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CmdConsoleSimulator</span><span class="p">(</span><span class="n">appl1Core</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">doJob</span><span class="p">()</span> <span class="n">throws</span> <span class="ne">Exception</span><span class="p">{</span>
        <span class="n">cmdConsole</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span>  <span class="p">);</span>   <span class="o">//</span><span class="n">imvoca</span> <span class="n">start</span> <span class="o">/</span> <span class="n">stop</span> <span class="o">/</span> <span class="n">resume</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span> <span class="n">String</span><span class="p">[]</span> <span class="n">args</span> <span class="p">)</span> <span class="n">throws</span> <span class="ne">Exception</span> <span class="p">{</span>
        <span class="n">CommUtils</span><span class="o">.</span><span class="n">aboutThreads</span><span class="p">(</span><span class="s2">&quot;Before start - &quot;</span><span class="p">);</span>
        <span class="n">Appl1HTTPSprint2</span> <span class="n">appl</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Appl1HTTPSprint2</span><span class="p">();</span>
        <span class="n">appl</span><span class="o">.</span><span class="n">doJob</span><span class="p">();</span>
        <span class="n">CommUtils</span><span class="o">.</span><span class="n">aboutThreads</span><span class="p">(</span><span class="s2">&quot;At end - &quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Per testare la correttezza della logica applicativa in un <span class="blue">ambiente locale</span>, senza le complicazioni della distribuzione,
introduciamo un simulatore della <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#cmdconsole"><span class="std std-ref">CmdConsole</span></a>, che interagisce direttamente con il POJO <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a>,
invocandone i metodi <a class="reference internal" href="#unibo-appl1-common-iappl1core"><span class="std std-ref">IAppl1Core</span></a>.</p>
</section>
<section id="unibo-console-cmdconsolesimulator">
<h3>unibo.console.CmdConsoleSimulator<a class="headerlink" href="#unibo-console-cmdconsolesimulator" title="Permalink to this headline">¶</a></h3>
<p>Un semplice simulatore della <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#cmdconsole"><span class="std std-ref">CmdConsole</span></a> crea un processo per inviare a <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> una sequenza di comandi
<code class="docutils literal notranslate"><span class="pre">stop/resume</span></code> e poi invoca il metodo <code class="docutils literal notranslate"><span class="pre">start</span></code> del POJO applicativo.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CmdConsoleSimulator</span> <span class="p">{</span>
<span class="kd">private</span>  <span class="n">Appl1Core</span> <span class="n">appl</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">CmdConsoleSimulator</span><span class="p">(</span> <span class="n">Appl1Core</span> <span class="n">appl</span> <span class="p">){</span>
       <span class="k">this</span><span class="p">.</span><span class="na">appl</span> <span class="o">=</span> <span class="n">appl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">activate</span><span class="p">(</span>   <span class="p">)</span>   <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">cmdConsoleSimul</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
            <span class="n">appl</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">private</span>  <span class="n">Thread</span> <span class="n">cmdConsoleSimul</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="p">(</span><span class="s">&quot;cmdConsole&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
                <span class="n">CommUtils</span><span class="p">.</span><span class="na">outmagenta</span><span class="p">(</span><span class="s">&quot;cmdConsoleSimul send STOP &quot;</span> <span class="o">+</span> <span class="n">i</span><span class="p">);</span>
                <span class="n">appl</span><span class="p">.</span><span class="na">stop</span><span class="p">();</span>
                 <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">1500</span><span class="p">);</span>
                 <span class="n">appl</span><span class="p">.</span><span class="na">resume</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="unibo-console-gui-appl1httpsprint2cmdconsole">
<h3>unibo.console.gui.Appl1HttpSprint2CmdConsole<a class="headerlink" href="#unibo-console-gui-appl1httpsprint2cmdconsole" title="Permalink to this headline">¶</a></h3>
<p>Un’alternativa, più elegante, a <a class="reference internal" href="#unibo-console-cmdconsolesimulator"><span class="std std-ref">CmdConsoleSimulator</span></a>,
è definire una GUI in Java che permetta ad un utente umano di inviare comandi.</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/StartStopGui.png" src="_images/StartStopGui.png" />
</td>
<td><p>GUI usata come Console locale</p></td>
</tr>
</tbody>
</table>
<p><span class="slide">Testing basato su osservabilità</span></p>
</section>
</section>
<section id="testing-e-osservabilita">
<h2>Testing e osservabilità<a class="headerlink" href="#testing-e-osservabilita" title="Permalink to this headline">¶</a></h2>
<p>Per realizzare quanto introdotto nei <a class="reference internal" href="Applicazione1.html#appl1-piani-di-testing-funzionale"><span class="std std-ref">Appl1: Piani di testing funzionale</span></a>, è necessario che
un programma di testing sia in grado di accedere a informazioni che derivano dal risultato
delle attività della applicazione.</p>
<p>L’idea di rendere osservabile lo stato applicativo con metodi ad-hoc, come fatto negli Sprint precedenti,
significa introdurre codice che ha poco o nulla a che fare con la logica applicativa.</p>
<p>Un modo per raggiungere lo scopo senza perturbare troppo il codice applicativo, è
fare riferimento al <strong>pattern observer</strong>  (uno dei più noti <a class="reference internal" href="Principi.html#design-patterns"><span class="std std-ref">Design patterns</span></a>)
e <span class="blue">rendere l’applicazione osservabile</span>.</p>
<p><span class="slide1">Il POJO applicativo osservabile</span></p>
<section id="appl1core-osservabile">
<h3>Appl1Core osservabile<a class="headerlink" href="#appl1core-osservabile" title="Permalink to this headline">¶</a></h3>
<p>A tal fine, introduciamo le seguenti modifiche:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Appl1Core</span>  <span class="kd">extends</span> <span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Observable</span> <span class="kd">implements</span> <span class="n">IAppl1Core</span><span class="p">{</span>
<span class="c1">//public void addObserver(java.util.Observer o) Ereditato da Observable</span>
 <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La classe <a class="reference external" href="https://www.tutorialspoint.com/java/util/java_util_observable.htm">java.util.Observable</a>
permette di aggiungere/rimuovere oggetti che implementano la classe
<a class="reference external" href="https://docs.oracle.com/javase/7/docs/api/java/util/Observer.html">java.util.Observer</a>, la quale
definisce il metodo  void <code class="docutils literal notranslate"><span class="pre">update(Observable</span> <span class="pre">o,</span> <span class="pre">Object</span> <span class="pre">news)</span></code> che viene invocato dal metodo
<code class="docutils literal notranslate"><span class="pre">notifyObservers(String</span> <span class="pre">news)</span></code> definito in <code class="docutils literal notranslate"><span class="pre">Observable</span></code>.</p>
</section>
<section id="updateobservers">
<h3>updateObservers<a class="headerlink" href="#updateobservers" title="Permalink to this headline">¶</a></h3>
<p>Poichè <code class="docutils literal notranslate"><span class="pre">notifyObservers</span></code> invoca udpdate degli Observer solo se è stato eseguito il metodo <code class="docutils literal notranslate"><span class="pre">setChanged</span></code>,
introduciamo in <a class="reference internal" href="#unibo-appl1-http-appl1core"><span class="std std-ref">Appl1Core</span></a> il metodo <em>updateObservers</em>,
per non dimenticarci di questo particolare:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">updateObservers</span><span class="p">(</span><span class="n">String</span> <span class="n">msg</span><span class="p">){</span>
    <span class="n">setChanged</span><span class="p">();</span>
    <span class="n">notifyObservers</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In questo modo possiamo rendere visibili informazioni all’esterno dell’applicazione. Ad esempio,
per segnalare che il robot è nello stato iniziale e nello stato finale, possiamo introdurre
opportune notifiche nel metodo <code class="docutils literal notranslate"><span class="pre">walkAtBoundary</span></code>:</p>
<section id="walkatboundary">
<h4>walkAtBoundary<a class="headerlink" href="#walkatboundary" title="Permalink to this headline">¶</a></h4>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">walkAtBoundary</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">checkRobotAtHome</span><span class="p">()</span> <span class="p">)</span>
        <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-athomebegin&quot;</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="p">(</span><span class="s">&quot;START: Robot must be at HOME&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">4</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">walkBySteppingWithStop</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">vr</span><span class="p">.</span><span class="na">turnLeft</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">checkRobotAtHome</span><span class="p">())</span>
        <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-athomeend&quot;</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="p">(</span><span class="s">&quot;END: Robot must be at HOME &quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notiamo che ora il <span class="slide1">controllo del robot in HOME</span>
(<a class="reference internal" href="Appl1-HTTPSprint1.html#checkrobotathome"><span class="std std-ref">checkRobotAtHome</span></a>) viene inserito nella applicazione stessa.</p>
<p>Altre notifiche permettono di sapere se il robot è fermo (<em>robot-stable</em>) o  in movimento(<em>robot-moving</em>),
o altro ancora.</p>
</section>
<section id="id1">
<h4>walkBySteppingWithStop<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">walkBySteppingWithStop</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
    <span class="n">CommUtils</span><span class="p">.</span><span class="na">outyellow</span><span class="p">(</span><span class="s">&quot;walkBySteppingWithStop n=&quot;</span><span class="o">+</span> <span class="n">n</span> <span class="p">);</span>
    <span class="kt">boolean</span> <span class="n">stepOk</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">stepOk</span>  <span class="p">)</span> <span class="p">{</span>
        <span class="n">uodateObservers</span><span class="p">(</span><span class="s">&quot;robot-moving&quot;</span><span class="p">);</span>
        <span class="n">stepOk</span> <span class="o">=</span>  <span class="n">vr</span><span class="p">.</span><span class="na">step</span><span class="p">(</span><span class="mi">350</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span> <span class="o">!</span> <span class="n">stepOk</span> <span class="p">)</span> <span class="n">notifyObservers</span><span class="p">(</span><span class="s">&quot;robot-collision&quot;</span><span class="p">);</span>
        <span class="k">else</span> <span class="n">uodateObservers</span><span class="p">(</span><span class="s">&quot;robot-stable&quot;</span><span class="p">);</span>
        <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span> <span class="c1">//to show the steps better</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">stopped</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">uodateObservers</span><span class="p">(</span><span class="s">&quot;robot-stopped&quot;</span><span class="p">);</span>
            <span class="n">waitResume</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="applinfo">
<h3>applInfo<a class="headerlink" href="#applinfo" title="Permalink to this headline">¶</a></h3>
<p>Notiamo che l’osservabilità implica concettualmente <span class="remark">la introduzione di un nuovo linguaggio</span>
(che denominiamo <code class="docutils literal notranslate"><span class="pre">applInfo</span></code>),
definito dall’insieme delle stringhe informative che l’applicazione può emettere. Al momento, abbiamo
introdotto le seguenti, con ovvia semantica:</p>
<ul class="simple">
<li><p>robot-athomebegin</p></li>
<li><p>robot-moving</p></li>
<li><p>robot-stable</p></li>
<li><p>robot-collision</p></li>
<li><p>robot-stopped</p></li>
<li><p>robot-resume</p></li>
<li><p>robot-athomeend</p></li>
</ul>
</section>
<section id="unibo-basicomm23-e-osservabilita">
<h3>unibo.basicomm23 e osservabilità<a class="headerlink" href="#unibo-basicomm23-e-osservabilita" title="Permalink to this headline">¶</a></h3>
<p>L’idea di introdurre oggetti osservabili e di oggetti osservatori è così frequente ed utile da indurci ad
inserire alune classi di utilità nel progetto <em>unibo.basicomm23</em>,
menzionato nello <a class="reference internal" href="Appl1-HTTPSprint1.html#progetto-unibo-basicomm23-anticipazione"><span class="std std-ref">Sprintt1</span></a>.</p>
<section id="unibo-basicomm23-interfaces-iobserver">
<h4>unibo.basicomm23.interfaces.IObserver<a class="headerlink" href="#unibo-basicomm23-interfaces-iobserver" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">interface</span> <span class="n">IObserver</span> <span class="n">extends</span> <span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Observer</span> <span class="p">{</span>
    <span class="n">void</span> <span class="n">update</span><span class="p">(</span><span class="n">String</span> <span class="n">var1</span><span class="p">);</span>
    <span class="o">//</span><span class="n">void</span> <span class="n">update</span><span class="p">(</span><span class="n">Observable</span> <span class="n">o</span><span class="p">,</span> <span class="n">Object</span> <span class="n">arg</span><span class="p">);</span> <span class="o">//</span><span class="n">inherited</span> <span class="n">by</span> <span class="n">Observer</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="unibo-basicomm23-utils-applabstractobserver">
<h4>unibo.basicomm23.utils.ApplAbstractObserver<a class="headerlink" href="#unibo-basicomm23-utils-applabstractobserver" title="Permalink to this headline">¶</a></h4>
<p>La classe astratta <em>ApplAbstractObserver</em> del progetto  <a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23"><span class="std std-ref">unibo.basicomm23</span></a>   fornisce
lo scheletro di un observer che lascia non specificato il metodo <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">void</span> <span class="pre">update(String</span> <span class="pre">msg)</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">ApplAbstractObserver</span> <span class="n">implements</span> <span class="n">IObserver</span> <span class="p">{</span>

 <span class="n">public</span> <span class="n">void</span> <span class="n">update</span><span class="p">(</span><span class="n">Observable</span> <span class="n">o</span><span class="p">,</span> <span class="n">Object</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">toString</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="n">public</span> <span class="n">abstract</span> <span class="n">void</span> <span class="n">update</span><span class="p">(</span><span class="n">String</span> <span class="n">var1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><span class="slide1">Un osservatore per il testing</span></p>
<p>Specializziamo dunque la classe <a class="reference internal" href="unibo.basicomm23.html#applabstractobserver"><span class="std std-ref">ApplAbstractObserver</span></a> per <span class="blue">definire un osservatore</span>
di <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> da usare nella fase di testing.</p>
<table class="colwidths-given docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="_images/Appl1CoreObsArch.PNG" src="_images/Appl1CoreObsArch.PNG" />
</td>
<td><p>L’osservatore tiene traccia della sequenza di stringhe informative emesse da <a class="reference internal" href="#appl1core-osservabile"><span class="std std-ref">Appl1Core osservabile</span></a>,
fornendo anche un metodo che blocca un chiamante fino a che l’applicazione giunge al termine.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="unibo-appl1-common-appl1coretestingobserver">
<h3>unibo.appl1.common.Appl1CoreTestingObserver<a class="headerlink" href="#unibo-appl1-common-appl1coretestingobserver" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>La variabile <code class="docutils literal notranslate"><span class="pre">moveCmds</span></code> definisce il set delle stringhe <a class="reference internal" href="#applinfo"><span class="std std-ref">applInfo</span></a> relative a macro-movimenti del robot.</p></li>
<li><p>La variabile <code class="docutils literal notranslate"><span class="pre">moveHistory</span></code> tiene traccia delle stringhe <code class="docutils literal notranslate"><span class="pre">moveCmds</span></code>.</p></li>
<li><p>La variabile <code class="docutils literal notranslate"><span class="pre">boundarySteps</span></code> tiene traccia del numero di step fatti dal robot per ogni lato del perimetro.</p></li>
<li><p>Il metodo <code class="docutils literal notranslate"><span class="pre">updateSideLength</span></code> permette il  conteggio degli step del robot, come vedremo
nella sezione <a class="reference internal" href="#appl1coretestingobserver-updatesidelength"><span class="std std-ref">Appl1CoreTestingObserver.updateSideLength</span></a>.</p></li>
</ul>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Appl1CoreTestingObserver</span> <span class="kd">extends</span> <span class="n">unibo</span><span class="p">.</span><span class="na">basicomm23</span><span class="p">.</span><span class="na">utils</span><span class="p">.</span><span class="na">ApplAbstractObserver</span> <span class="p">{</span>
<span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">moveCmds</span>       <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kd">private</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">moveHistory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kd">private</span> <span class="kt">boolean</span> <span class="n">applIsTerminated</span> <span class="p">;</span>
<span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">boundarySteps</span>      <span class="p">;</span>
<span class="kd">private</span> <span class="kt">int</span> <span class="n">ntsteps</span>          <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">Appl1CoreTestingObserver</span><span class="p">(){</span>
        <span class="n">moveCmds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;robot-athomebegin&quot;</span><span class="p">);</span>
        <span class="n">moveCmds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;robot-moving&quot;</span><span class="p">);</span>
        <span class="n">moveCmds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;robot-stable&quot;</span><span class="p">);</span>
        <span class="n">moveCmds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;robot-stopped&quot;</span><span class="p">);</span>
        <span class="n">moveCmds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;robot-athomeend&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//permette di riusare un observer in fase di testing</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="p">(){</span>
        <span class="n">moveHistory</span>      <span class="o">=</span> <span class="k">new</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">boundarySteps</span>    <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
        <span class="n">applIsTerminated</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">public</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getMoveHistory</span><span class="p">(){</span>
        <span class="k">return</span> <span class="n">moveHistory</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="n">String</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">moveCmds</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span> <span class="n">moveHistory</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
        <span class="n">updateSideLength</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span> <span class="c1">//Si veda la sezione Appl1CoreTestingObserver.updateSideLength</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;robot-athomeend&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">setTerminated</span><span class="p">();</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">setTerminated</span><span class="p">(){</span>
        <span class="n">applIsTerminated</span> <span class="o">=</span><span class="kc">true</span><span class="p">;</span>
        <span class="n">notifyAll</span><span class="p">();</span> <span class="c1">//riattiva waitApplTerminated</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">waitApplTerminated</span><span class="p">(){</span>
        <span class="k">while</span><span class="p">(</span> <span class="o">!</span> <span class="n">applIsTerminated</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
                 <span class="n">wait</span><span class="p">();</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span>  <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">evalBoundaryDone</span><span class="p">(){</span>
        <span class="kt">boolean</span> <span class="n">boundaryConstraint</span> <span class="o">=</span> <span class="n">boundarySteps</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="n">boundarySteps</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
                                  <span class="o">&amp;&amp;</span> <span class="n">boundarySteps</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">==</span> <span class="n">boundarySteps</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="p">;</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">boundaryConstraint</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A questo punto possiamo definire un programma, basato su <strong>JUnit</strong>, che effettua i test introdotti in
<a class="reference internal" href="Applicazione1.html#appl1-piani-di-testing-funzionale"><span class="std std-ref">Appl1: Piani di testing funzionale</span></a>.</p>
</section>
</section>
<section id="unibo-appl1-http-testappl1httpsprint2">
<h2>unibo.appl1.http.TestAppl1HTTPSprint2<a class="headerlink" href="#unibo-appl1-http-testappl1httpsprint2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestAppl1HTTPSprint2</span> <span class="p">{</span>
<span class="kd">private</span> <span class="n">Appl1Core</span> <span class="n">appl</span><span class="p">;</span>
<span class="kd">private</span> <span class="n">Appl1CoreTestingObserver</span> <span class="n">obs</span><span class="p">;</span>

<span class="c1">//Metodi di utilità</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initSystemToTest</span><span class="p">(){...}</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">startTheApplication</span><span class="p">(){...}</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">checkTerminated</span><span class="p">(){...}</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">checkHistoryAfterStop</span><span class="p">(){...}</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">checkBoundaryDone</span><span class="p">(){...}</span>
</pre></div>
</div>
<p>Vediamo i Metodi di utilità.</p>
<section id="initsystemtotest">
<h3>initSystemTotest<a class="headerlink" href="#initsystemtotest" title="Permalink to this headline">¶</a></h3>
<p>Inizializza il sistema da testare: dopo avere creato il POJO applicativo, associa ad esso un osservatore
<a class="reference internal" href="#unibo-appl1-common-appl1coretestingobserver"><span class="std std-ref">Appl1CoreTestingObserver</span></a>.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Before</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initSystemTotest</span><span class="p">(){</span>
    <span class="n">appl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Appl1Core</span><span class="p">();</span> <span class="c1">//Il robot viene verificato in HOME !</span>
    <span class="n">obs</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">Appl1CoreTestingObserver</span><span class="p">();</span>
    <span class="n">obs</span><span class="p">.</span><span class="na">init</span><span class="p">();</span>
    <span class="n">appl</span><span class="p">.</span><span class="na">addObserver</span><span class="p">(</span> <span class="n">obs</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="starttheapplication">
<h3>startTheApplication<a class="headerlink" href="#starttheapplication" title="Permalink to this headline">¶</a></h3>
<p>Invoca il metodo <code class="docutils literal notranslate"><span class="pre">appl.start</span></code> (che sua volta invoca <a class="reference internal" href="#walkatboundary"><span class="std std-ref">walkAtBoundary</span></a>) all’interno di
un nuovo Thread,
per evitare di bloccare il Thread di testing, nel momento in cui l’applicazione entra nella fase proattiva.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">startTheApplication</span><span class="p">(){</span>
    <span class="k">new</span> <span class="n">Thread</span><span class="p">(){</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="p">(){</span>
        <span class="k">try</span><span class="p">{</span>
            <span class="n">appl</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
        <span class="p">}</span><span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">fail</span><span class="p">(</span><span class="s">&quot;startTheApplication &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">}.</span><span class="na">start</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="checkterminated">
<h3>checkTerminated<a class="headerlink" href="#checkterminated" title="Permalink to this headline">¶</a></h3>
<p>Blocca il chiamante, in attesa che l’applicazione sia terminata.</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">checkTerminated</span><span class="p">(){</span>
    <span class="n">obs</span><span class="p">.</span><span class="na">waitApplTerminated</span><span class="p">();</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="checkhistoryafterstop">
<h3>checkHistoryAfterStop<a class="headerlink" href="#checkhistoryafterstop" title="Permalink to this headline">¶</a></h3>
<p>Controlla che la sequenza di stringhe relative a macro-movimenti del robot emesse dall’applicazione
sia una sequenza con la forma:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">robot</span><span class="o">-</span><span class="n">athomebegin</span> <span class="p">(</span><span class="n">robot</span><span class="o">-</span><span class="n">moving</span> <span class="n">robot</span><span class="o">-</span><span class="n">stable</span><span class="p">)</span><span class="o">+</span>  <span class="n">robot</span><span class="o">-</span><span class="n">stopped</span>
</pre></div>
</div>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">checkHistoryAfterStop</span><span class="p">(){</span>
    <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">1500</span><span class="p">);</span> <span class="c1">//Per elaborare ultime stringhe negli observers (Non bello)</span>
    <span class="n">checkTerminated</span><span class="p">();</span> <span class="o">???</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">h</span> <span class="o">=</span> <span class="n">obs</span><span class="p">.</span><span class="na">getHistory</span><span class="p">();</span>
    <span class="k">assert</span><span class="p">(</span> <span class="n">h</span><span class="p">.</span><span class="na">elementAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;robot-athomebegin&quot;</span><span class="p">));</span>
    <span class="k">assert</span><span class="p">(</span> <span class="n">h</span><span class="p">.</span><span class="na">elementAt</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;robot-moving&quot;</span><span class="p">));</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">h</span><span class="p">.</span><span class="na">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">)</span> <span class="k">assert</span><span class="p">(</span> <span class="n">h</span><span class="p">.</span><span class="na">elementAt</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;robot-stable&quot;</span><span class="p">));</span>
    <span class="c1">//Dopo il secondo item ci possono essere altre coppie robot-moving/robot-stable</span>
    <span class="k">assert</span><span class="p">(</span> <span class="n">h</span><span class="p">.</span><span class="na">elementAt</span><span class="p">(</span><span class="n">h</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="s">&quot;robot-stopped&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="checkboundarydone">
<h3>checkBoundaryDone<a class="headerlink" href="#checkboundarydone" title="Permalink to this headline">¶</a></h3>
<p>Verifica  che il robot sia fermo in HOME ed abbia effettuato un giro.</p>
<p>Questo metodo potrebbe essere scritto inserendo nel codice applicativo varibili di stato, come
l’array <code class="docutils literal notranslate"><span class="pre">boundarySteps</span></code> che abbiamo introdotto in <a class="reference internal" href="Appl1-HTTPSprint1.html#walkbystepping-che-conta-i-passi"><span class="std std-ref">walkByStepping che conta i passi</span></a>
nello Sprint1.</p>
<p>In questo Sprint però, vogliamo che sia l’observer a fare il controllo, sulla base delle informazioni
memorizzate in <code class="docutils literal notranslate"><span class="pre">boundarySteps</span></code>. Quindi:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">checkBoundaryDone</span><span class="p">(){</span>
   <span class="n">checkTerminated</span><span class="p">();</span>
   <span class="k">assert</span><span class="p">(</span> <span class="n">obs</span><span class="p">.</span><span class="na">evalBoundaryDone</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><span class="slide1">Conteggio passi</span></p>
<section id="applinfo-per-conteggio-passi">
<h4>applInfo per conteggio passi<a class="headerlink" href="#applinfo-per-conteggio-passi" title="Permalink to this headline">¶</a></h4>
<p>Per ottenere lo scopo, estendiamo il linguaggio <a class="reference internal" href="#applinfo"><span class="std std-ref">applInfo</span></a> cone le nuove stringhe:</p>
<ul class="simple">
<li><p>robot-walking-column-sud</p></li>
<li><p>robot-walking-row-east</p></li>
<li><p>robot-walking-column-north</p></li>
<li><p>robot-walking-row-west</p></li>
<li><p>robot-stepdone</p></li>
</ul>
<p>Queste informazioni possono essere emesse dalla operazione <a class="reference internal" href="#id1"><span class="std std-ref">walkBySteppingWithStop</span></a>,
invocata da <a class="reference internal" href="#walkatboundary"><span class="std std-ref">walkAtBoundary</span></a>.</p>
</section>
</section>
<section id="walkbystepping-con-nuove-emissioni">
<h3>walkByStepping con nuove emissioni<a class="headerlink" href="#walkbystepping-con-nuove-emissioni" title="Permalink to this headline">¶</a></h3>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">walkBySteppingWithStop</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
    <span class="kt">boolean</span> <span class="n">stepOk</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="n">CommUtils</span><span class="p">.</span><span class="na">outyellow</span><span class="p">(</span><span class="s">&quot;walkBySteppingWithStop n=&quot;</span><span class="o">+</span> <span class="n">n</span> <span class="p">);</span><span class="c1">//+ &quot; vr=&quot; + vr.getClass().getName()</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">){</span> <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-walking-column-sud&quot;</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">){</span> <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-walking-row-east&quot;</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">){</span> <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-walking-column-north&quot;</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">){</span> <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-walking-row-west&quot;</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">stepOk</span>  <span class="p">)</span> <span class="p">{</span>
        <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-moving&quot;</span><span class="p">);</span>
        <span class="n">stepOk</span> <span class="o">=</span>  <span class="n">vr</span><span class="p">.</span><span class="na">step</span><span class="p">(</span><span class="mi">350</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span> <span class="o">!</span> <span class="n">stepOk</span> <span class="p">)</span> <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-collision&quot;</span><span class="p">);</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-stepdone&quot;</span><span class="p">);</span>
            <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-stable&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span> <span class="c1">//to show the steps better</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">stopped</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">updateObservers</span><span class="p">(</span><span class="s">&quot;robot-stopped&quot;</span><span class="p">);</span>
            <span class="n">waitResume</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="appl1coretestingobserver-updatesidelength">
<h3>Appl1CoreTestingObserver.updateSideLength<a class="headerlink" href="#appl1coretestingobserver-updatesidelength" title="Permalink to this headline">¶</a></h3>
<p>Il metodo gestisce le <a class="reference internal" href="#applinfo-per-conteggio-passi"><span class="std std-ref">applInfo per conteggio passi</span></a> aggiornando gli elementi di <code class="docutils literal notranslate"><span class="pre">boundarySteps</span></code> relativi
a ogni lato del perimetro.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">protected</span> <span class="n">void</span> <span class="n">updateSideLength</span><span class="p">(</span><span class="n">String</span> <span class="n">msg</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-stepdone&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">ntsteps</span><span class="o">++</span><span class="p">;</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-walking-column-sud&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">ntsteps</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-walking-row-east&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">boundarySteps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">ntsteps</span><span class="p">;</span> <span class="n">ntsteps</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-walking-column-north&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">boundarySteps</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">ntsteps</span><span class="p">;</span> <span class="n">ntsteps</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-walking-row-west&quot;</span><span class="p">)</span> <span class="p">){</span> <span class="n">boundarySteps</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="n">ntsteps</span><span class="p">;</span> <span class="n">ntsteps</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="p">;}</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">msg</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;robot-athomeend&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span> <span class="n">boundarySteps</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">ntsteps</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Possiamo ora realizzare quanto introdotto in <a class="reference internal" href="Applicazione1.html#appl1-azioni-di-testing-pianificate"><span class="std std-ref">Appl1: Azioni di testing pianificate</span></a>.</p>
<p><span class="slide1">Realizzazione dei test pianificati</span></p>
</section>
<section id="teststartnostop">
<h3>testStartNoStop<a class="headerlink" href="#teststartnostop" title="Permalink to this headline">¶</a></h3>
<p><span class="remark">testStartNoStop</span>: Dopo che <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> ha eseguito il metodo <strong>start</strong>, occorre verificare che il robot
abbia iniziato la sua attività, cioè sia in moto e che, al termine, esso risulti
fermo in <a class="reference internal" href="VirtualRobot23.html#stato-iniziale-del-virtualrobot"><span class="std std-ref">HOME</span></a> avendo completato un giro.</p>
<p>Tenendo conto che test del robot in HOME è già parte del codice applicativo,
questa procedura di testing si realizza ora come segue:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testStartNoStop</span><span class="p">(){</span>
    <span class="n">startTheApplication</span><span class="p">();</span>
    <span class="k">assert</span><span class="p">(</span> <span class="n">checkBoundaryDone</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="teststop">
<h3>testStop<a class="headerlink" href="#teststop" title="Permalink to this headline">¶</a></h3>
<p><span class="remark">testStop</span>: Dopo che <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> ha eseguito il metodo <strong>stop</strong>, occorre verificare che il robot
sia fermo.</p>
<p>Questa procedura di testing si realizza ora come segue:</p>
<div class="highlight-Java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testStop</span><span class="p">(){</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">startTheApplication</span><span class="p">();</span>
        <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span> <span class="c1">//Attendo un pò ...</span>
        <span class="n">appl</span><span class="p">.</span><span class="na">stop</span><span class="p">();</span>
        <span class="n">checkHistoryAfterStop</span><span class="p">();</span>
        <span class="n">CommUtils</span><span class="p">.</span><span class="na">delay</span><span class="p">(</span><span class="mi">1000</span> <span class="p">);</span><span class="c1">//Attendo un pò ...</span>
        <span class="n">continueToHome</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fail</span><span class="p">(</span><span class="s">&quot;TestAppl1HTTPLocal | testStart &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">continueToHome</span><span class="p">(){</span>
    <span class="n">appl</span><span class="p">.</span><span class="na">resume</span><span class="p">();</span>
    <span class="k">assert</span><span class="p">(</span> <span class="n">checkTerminated</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notiamo che il metodo <code class="docutils literal notranslate"><span class="pre">continueToHome</span></code> riporta il robot nella situazione iniziale,
permettendo la coesistenza nella stessa classe di altre operazioni di testing, in quanto
viene ripristinata <span class="blue">l’assunzione</span> che il robot sia inizialmente in <code class="docutils literal notranslate"><span class="pre">HOME</span></code>.</p>
<p>Questo metodo copre anche  <span class="brown">testResume</span>, introdotta nelle
<a class="reference internal" href="Applicazione1.html#appl1-azioni-di-testing-pianificate"><span class="std std-ref">Appl1: Azioni di testing pianificate</span></a>.</p>
</section>
<section id="testresume">
<h3>testResume<a class="headerlink" href="#testresume" title="Permalink to this headline">¶</a></h3>
<p><span class="remark">testResume</span>:  Dopo che <a class="reference internal" href="#appl1core"><span class="std std-ref">Appl1Core</span></a> ha eseguito il metodo <strong>stop</strong>, <strong>resume</strong>, occorre  procedere come per
<a class="reference internal" href="#teststartnostop"><span class="std std-ref">testStartNoStop</span></a>.</p>
<p>Passiamo ora a <a class="reference internal" href="Appl1-HTTPSprint3.html#appl1-httpsprint3"><span class="std std-ref">Appl1-HTTPSprint3</span></a>.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Appl1-HTTPSprint2</a><ul>
<li><a class="reference internal" href="#overview-di-appl1-httpsprint2">Overview di Appl1-HTTPSprint2</a><ul>
<li><a class="reference internal" href="#requisito-sprint2-stop-resume">Requisito SPRINT2: stop/resume</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appl1core">Appl1Core</a><ul>
<li><a class="reference internal" href="#unibo-appl1-common-iappl1core">unibo.appl1.common.IAppl1Core</a></li>
<li><a class="reference internal" href="#unibo-appl1-http-appl1core">unibo.appl1.http.Appl1Core</a><ul>
<li><a class="reference internal" href="#start">start</a></li>
</ul>
</li>
<li><a class="reference internal" href="#walkbysteppingwithstop">walkBySteppingWithStop</a></li>
<li><a class="reference internal" href="#stop">stop</a></li>
<li><a class="reference internal" href="#resume">resume</a></li>
<li><a class="reference internal" href="#unibo-appl1-http-appl1httpsprint2">unibo.appl1.http.Appl1HTTPSprint2</a></li>
<li><a class="reference internal" href="#unibo-console-cmdconsolesimulator">unibo.console.CmdConsoleSimulator</a></li>
<li><a class="reference internal" href="#unibo-console-gui-appl1httpsprint2cmdconsole">unibo.console.gui.Appl1HttpSprint2CmdConsole</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-e-osservabilita">Testing e osservabilità</a><ul>
<li><a class="reference internal" href="#appl1core-osservabile">Appl1Core osservabile</a></li>
<li><a class="reference internal" href="#updateobservers">updateObservers</a><ul>
<li><a class="reference internal" href="#walkatboundary">walkAtBoundary</a></li>
<li><a class="reference internal" href="#id1">walkBySteppingWithStop</a></li>
</ul>
</li>
<li><a class="reference internal" href="#applinfo">applInfo</a></li>
<li><a class="reference internal" href="#unibo-basicomm23-e-osservabilita">unibo.basicomm23 e osservabilità</a><ul>
<li><a class="reference internal" href="#unibo-basicomm23-interfaces-iobserver">unibo.basicomm23.interfaces.IObserver</a></li>
<li><a class="reference internal" href="#unibo-basicomm23-utils-applabstractobserver">unibo.basicomm23.utils.ApplAbstractObserver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unibo-appl1-common-appl1coretestingobserver">unibo.appl1.common.Appl1CoreTestingObserver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unibo-appl1-http-testappl1httpsprint2">unibo.appl1.http.TestAppl1HTTPSprint2</a><ul>
<li><a class="reference internal" href="#initsystemtotest">initSystemTotest</a></li>
<li><a class="reference internal" href="#starttheapplication">startTheApplication</a></li>
<li><a class="reference internal" href="#checkterminated">checkTerminated</a></li>
<li><a class="reference internal" href="#checkhistoryafterstop">checkHistoryAfterStop</a></li>
<li><a class="reference internal" href="#checkboundarydone">checkBoundaryDone</a><ul>
<li><a class="reference internal" href="#applinfo-per-conteggio-passi">applInfo per conteggio passi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#walkbystepping-con-nuove-emissioni">walkByStepping con nuove emissioni</a></li>
<li><a class="reference internal" href="#appl1coretestingobserver-updatesidelength">Appl1CoreTestingObserver.updateSideLength</a></li>
<li><a class="reference internal" href="#teststartnostop">testStartNoStop</a></li>
<li><a class="reference internal" href="#teststop">testStop</a></li>
<li><a class="reference internal" href="#testresume">testResume</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Appl1-HTTPSprint1.html"
                          title="previous chapter">Appl1-HTTPSprint1</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Appl1-HTTPSprint3.html"
                          title="next chapter">Appl1-HTTPSprint3</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Appl1-HTTPSprint2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Appl1-HTTPSprint3.html" title="Appl1-HTTPSprint3"
             >next</a> |</li>
        <li class="right" >
          <a href="Appl1-HTTPSprint1.html" title="Appl1-HTTPSprint1"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">iss23 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Appl1-HTTPSprint2</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Antonio Natali.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>