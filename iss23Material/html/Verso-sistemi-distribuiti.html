
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Verso-sistemi-distribuiti &#8212; iss23 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">iss23 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Verso-sistemi-distribuiti</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="verso-sistemi-distribuiti">
<h1>Verso-sistemi-distribuiti<a class="headerlink" href="#verso-sistemi-distribuiti" title="Permalink to this headline">¶</a></h1>
<section id="history">
<h2>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h2>
<section id="parte-preliminare">
<h3>1 - Parte preliminare<a class="headerlink" href="#parte-preliminare" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a>: sistema che permette di muovere un robot virtuale usando interazioni sincrone via HTTP
e asincrone via WebSocket.</p></li>
<li><p><a class="reference internal" href="VirtualRobot23.html#esempi-di-uso-naive-di-wenv"><span class="std std-ref">Esempi di uso naive di WEnv</span></a>:  esempi di programmi Java che usano <a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a> senza l’uso di supporti.</p>
<ul class="simple">
<li><p><a class="reference internal" href="VirtualRobot23.html#testmovesusinghttp"><span class="std std-ref">TestMovesUsingHttp</span></a>: Esegue mosse di base del robot inviando via <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> comandi espressi in <a class="reference internal" href="VirtualRobot23.html#comandi-base-per-il-robot-in-cril"><span class="std std-ref">cril</span></a>.</p></li>
<li><p><a class="reference internal" href="VirtualRobot23.html#testmovesusingws"><span class="std std-ref">TestMovesUsingWs</span></a>:   Esegue mosse di base del robot inviando via <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code> comandi espressi in <a class="reference internal" href="VirtualRobot23.html#comandi-base-per-il-robot-in-cril"><span class="std std-ref">cril</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-basicomm23-http-httpcommapache"><span class="std std-ref">unibo.basicomm23.http.HTTPCommApache</span></a>: un primo supporto per le interazioni via <code class="docutils literal notranslate"><span class="pre">HTTP</span></code>,  introdotto durante
lo sviluppo di <a class="reference internal" href="Applicazione1-HTTP-Core.html#applicazione1-http-core"><span class="std std-ref">Applicazione1-HTTP-Core</span></a>.</p></li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-supports-vrobothlmoveshttpapache"><span class="std std-ref">unibo.supports.VrobotHLMovesHTTPApache</span></a>:   supporto che fornisce mosse di alto livelo del robot usando
<a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-basicomm23-http-httpcommapache"><span class="std std-ref">unibo.basicomm23.http.HTTPCommApache</span></a>.</p></li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-appl1-http-application1httpcore"><span class="std std-ref">unibo.appl1.http.Application1HTTPCore</span></a>: realizzazione dei requisiti di <a class="reference internal" href="Applicazione1.html#applicazione1"><span class="std std-ref">Applicazione1</span></a> basata su
<a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-basicomm23-http-httpcommapache"><span class="std std-ref">unibo.basicomm23.http.HTTPCommApache</span></a>.</p></li>
</ol>
</section>
<section id="interconnessione">
<h3>2 - Interconnessione<a class="headerlink" href="#interconnessione" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><span class="xref std std-ref">unibo.basicomm23.interfaces.Interaction2021</span>: verso un concetto astratto di <strong>Interconnessione</strong> come
canale di comunicazione bidirezionale definito nel progetto <a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23"><span class="std std-ref">unibo.basicomm23</span></a>, che fornisce implementazioni
per diversi <a class="reference internal" href="unibo.basicomm23.html#tipi-di-protocollo"><span class="std std-ref">Tipi di protocollo</span></a>.</p></li>
<li><p><a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-enablers-enablerasserver"><span class="std std-ref">unibo.basicomm23.enablers.EnablerAsServer</span></a>: Server che ouò ricevere messaggi via TCP, UDP, CoaP,
introdotto per permettere che componenti remoti (come la console di figura) possano inviare comandi
ad una nostra applicazione supporti. Prima facilitazione per realizzare sistemi distribuiti, definiti nel progetto
<a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23"><span class="std std-ref">unibo.basicomm23</span></a>, sezione <a class="reference internal" href="unibo.basicomm23.html#abilitatori-di-comunicazione"><span class="std std-ref">Abilitatori di comunicazione</span></a>.</p></li>
<li><p><a class="reference internal" href="Interaction2021-HTTP-WS.html#interaction2021-http-ws"><span class="std std-ref">Interaction2021-HTTP-WS</span></a>: realizzazione dell’<em>Interconnessione</em> con protocolli HTTP (<a class="reference internal" href="Interaction2021-HTTP-WS.html#httpconnection"><span class="std std-ref">HttpConnection</span></a>)
e WebSocket (<a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a>). In <a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a> sono di particolare rilevanza i metodi
<a class="reference internal" href="Applicazione1-WS.html#vrobothlmovesws-request"><span class="std std-ref">String request(String msg)</span></a> e
<a class="reference internal" href="Applicazione1-WS.html#vrobothlmovesws-stepasynch"><span class="std std-ref">void stepAsynch(int time, IWsInfoHandler stepok, IWsInfoHandler stepko)</span></a>.</p></li>
<li><p><a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-utils-connectionfactory"><span class="std std-ref">unibo.basicomm23.utils.ConnectionFactory</span></a>: factory che permette di costruire un oggetto di supporto alla comunicazione
che implemeneta l’interfaccia <span class="xref std std-ref">unibo.basicomm23.interfaces.Interaction2021</span> usando uno dei protocolli
definiti da <a class="reference internal" href="unibo.basicomm23.html#tipi-di-protocollo"><span class="std std-ref">Tipi di protocollo</span></a>.</p></li>
<li><p><a class="reference internal" href="Interaction2021-HTTP-WS.html#it-unibo-virtualrobot2023-esperimentihttp"><span class="std std-ref">it.unibo.virtualRobot2023.EsperimentiHTTP</span></a>: esprimenti di interazione con WEnv usando
<a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-utils-connectionfactory"><span class="std std-ref">ConnectionFactory</span></a> e <a class="reference internal" href="Interaction2021-HTTP-WS.html#httpconnection"><span class="std std-ref">HttpConnection</span></a>.</p></li>
<li><p><a class="reference internal" href="Interaction2021-HTTP-WS.html#it-unibo-virtualrobot2023-esperimentiws"><span class="std std-ref">it.unibo.virtualRobot2023.EsperimentiWS</span></a>: esprimenti di interazione con WEnv usando
<a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-utils-connectionfactory"><span class="std std-ref">ConnectionFactory</span></a> e <a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a>.</p></li>
</ol>
</section>
<section id="supporti-hl-per-robot">
<h3>3 - Supporti HL per robot<a class="headerlink" href="#supporti-hl-per-robot" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p><a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-supports-vrobothlmoveshttp"><span class="std std-ref">unibo.supports.VrobotHLMovesHTTP</span></a>: supporto (evoluzione di <a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-supports-vrobothlmoveshttpapache"><span class="std std-ref">unibo.supports.VrobotHLMovesHTTPApache</span></a>)
che fornisce mosse di alto livelo del robot usando  <a class="reference internal" href="Interaction2021-HTTP-WS.html#httpconnection"><span class="std std-ref">HttpConnection</span></a> per le interazioni con WEnv.</p></li>
<li><p><a class="reference internal" href="Applicazione1-WS.html#unibo-supports-vrobothlmovesws"><span class="std std-ref">unibo.supports.VrobotHLMovesWS</span></a>: supporto che fornisce mosse di alto livelo del robot,  usando  <a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a>
per le interazioni con WEnv.</p></li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-supports-vrobothlsupportfactory"><span class="std std-ref">unibo.supports.VrobotHLSupportFactory</span></a>: factory che costruisce un oggetto di supporto alla comunicazione
con il robot che implemeneta l’intefaccia <a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-common-ivrobotmoves"><span class="std std-ref">IVrobotMoves</span></a> usando <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> o <code class="docutils literal notranslate"><span class="pre">WS</span></code>.</p></li>
</ol>
</section>
<section id="l-applicazione1">
<h3>4 - L’Applicazione1<a class="headerlink" href="#l-applicazione1" title="Permalink to this headline">¶</a></h3>
<p>Abbiamo introdotto due versioni di un’applicazione che muove il <a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a>
lungo i bordi perimetrali (privi di ostacoli) di una stanza dell’ambiente virtual WEnv:</p>
<ul>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-application1coreconn"><span class="std std-ref">Application1CoreConn</span></a>, che interagisce con <a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a>
in modo sincrono, usando il protocollo <code class="docutils literal notranslate"><span class="pre">HTTP</span></code> e <a class="reference internal" href="Interaction2021-HTTP-WS.html#httpconnection"><span class="std std-ref">HttpConnection</span></a>.</p>
<a class="reference internal image-reference" href="_images/ArchAppl1Wenv.png"><img alt="_images/ArchAppl1Wenv.png" src="_images/ArchAppl1Wenv.png" style="width: 60%;" /></a>
</li>
<li><p><a class="reference internal" href="Applicazione1-WS.html#unibo-ws-application1ws"><span class="std std-ref">Applicazione1-WS</span></a>,  che interagisce con <a class="reference internal" href="VirtualRobot23.html#virtualrobot23"><span class="std std-ref">VirtualRobot23</span></a>
in modo asincrono, usando le <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code> e <a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a>.</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-application1coreconn"><span class="std std-ref">unibo.appl1.interaction.Application1CoreConn</span></a>: realizzazione dei requisiti di <a class="reference internal" href="Applicazione1.html#applicazione1"><span class="std std-ref">Applicazione1</span></a></dt><dd><p>basata su <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-common-application1abstractbase"><span class="std std-ref">Application1AbstractBase</span></a> che usa <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-supports-vrobothlsupportfactory"><span class="std std-ref">VrobotHLSupportFactory</span></a>.</p>
</dd>
</dl>
</li>
</ul>
<section id="comandi-con-risposta">
<h4>Comandi con risposta<a class="headerlink" href="#comandi-con-risposta" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>L’applicazione (in entrambe le versioni) implementa operazioni ad alto livello per il robot, definite dall’interfaccia
<a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-common-ivrobotmoves"><span class="std std-ref">unibo.common.IVrobotMoves</span></a>.</p>
<p>Tutte le operazioni sono realizzate da metodi privi di risposta, tranne
la mossa  <a class="reference internal" href="Applicazione1-HTTP-Core.html#step"><span class="std std-ref">step</span></a> di movimento in avanti per un tempo
prefissato definita da un metodo con la seguente signature:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">boolean</span> <span class="nf">step</span><span class="p">(</span><span class="kt">int</span> <span class="n">time</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
</pre></div>
</div>
<p><em>step</em> viene realizzata in due modi diversi:</p>
<ul class="simple">
<li><p>con interazioni <strong>sincrone</strong> (<a class="reference internal" href="Applicazione1-HTTP-Core.html#step-implementazione"><span class="std std-ref">step: implementazione</span></a>) all’interno di un supporto per le interazioni
con WEnv basato su <code class="docutils literal notranslate"><span class="pre">HTTP</span></code>  <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-supports-vrobothlmoveshttp"><span class="std std-ref">unibo.supports.VrobotHLMovesHTTP</span></a>;</p></li>
<li><p>con interazioni <strong>asincrone</strong> all’interno di un supporto per le interazioni con WEnv basato su <code class="docutils literal notranslate"><span class="pre">WebSocket</span></code>
<a class="reference internal" href="Applicazione1-WS.html#unibo-supports-vrobothlmovesws"><span class="std std-ref">unibo.supports.VrobotHLMovesWS</span></a>.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="supporti-hl-per-robot-con-planner">
<h3>5 -  Supporti HL per robot con planner<a class="headerlink" href="#supporti-hl-per-robot-con-planner" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="MovimentiPianificati.html#unibo-appl1-map-vrobothlmoveswsplanned"><span class="std std-ref">unibo.appl1.map.VrobotHLMovesWSPlanned</span></a>, che realizza le mosse del robot in modo da modificare la</dt><dd><p>(rappresentazione della sua) posizione su una mappa della stanza.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="applicazioni-con-planner">
<h3>6 - Applicazioni con planner<a class="headerlink" href="#applicazioni-con-planner" title="Permalink to this headline">¶</a></h3>
<section id="application1explorebycolumn">
<h4>Application1ExploreByColumn<a class="headerlink" href="#application1explorebycolumn" title="Permalink to this headline">¶</a></h4>
<p>Esplora la stanza con la seguente strategia:</p>
<ul class="simple">
<li><p>usa  <a class="reference internal" href="MovimentiPianificati.html#attemptstep"><span class="std std-ref">attemptStep</span></a> per muovere il robot lungo la prima colonna;</p></li>
<li><p>appena trova un ostacolo, ruota di 180° e torna (usando  <code class="docutils literal notranslate"><span class="pre">reachPos</span></code>) alla riga iniziale lungo il percorso appena fatto;</p></li>
<li><p>si sposta sulla colonna successiva, se esiste, e ripete il procedimento. Se è giunto a wallRigth torna in HOME</p></li>
</ul>
<p>Per realizzare questo comportamento,
<em>Application1ExploreByColumn</em>  extends <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-common-application1abstractbase"><span class="std std-ref">Application1AbstractBase</span></a> e definisce</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">doJob</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span> <span class="n">walkAlongAColumn</span><span class="p">();</span> <span class="p">}</span>
</pre></div>
</div>
<p>Il metodo <code class="docutils literal notranslate"><span class="pre">walkAlongAColumn</span></code> usa <a class="reference internal" href="MovimentiPianificati.html#attemptstep"><span class="std std-ref">attemptStep</span></a> di
<a class="reference internal" href="MovimentiPianificati.html#unibo-appl1-map-vrobothlmoveswsplanned"><span class="std std-ref">VrobotHLMovesWSPlanned</span></a> e  <cite>reachPos`</cite> di
<a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-common-application1abstractbase"><span class="std std-ref">Application1AbstractBase</span></a>.</p>
</section>
<section id="application1explorespiral">
<h4>Application1ExploreSpiral<a class="headerlink" href="#application1explorespiral" title="Permalink to this headline">¶</a></h4>
<p>Esplora la stanza con la seguente strategia:</p>
<ul class="simple">
<li><p>usa  <a class="reference internal" href="MovimentiPianificati.html#attemptstep"><span class="std std-ref">attemptStep</span></a> per cercare di raggiungere la cella 1,1;</p></li>
<li><p>qualunque sia l’esito, torna a HOME usando <code class="docutils literal notranslate"><span class="pre">reachPos</span></code> di
<a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-common-application1abstractbase"><span class="std std-ref">Application1AbstractBase</span></a></p></li>
<li><p>ripete cercando di arrivare a 2,2 e così via</p></li>
</ul>
<p><em>Application1ExploreSpiral</em> estende <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-common-application1abstractbase"><span class="std std-ref">Application1AbstractBase</span></a> e definisce</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">doJob</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span> <span class="n">dospiral</span><span class="p">();</span>   <span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="basicrobot">
<h2>7 - basicrobot<a class="headerlink" href="#basicrobot" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Obiettivo: introdurre un componente software che esegue comandi di spostamento di un DDR-robot
in ‘modo indipendente dalla tecnologia’ con cui è realizzato del robot (virtuale o reale).</p></li>
</ul>
<section id="progetto-unibo-basicrobo22">
<h3>Progetto unibo.basicrobo22<a class="headerlink" href="#progetto-unibo-basicrobo22" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Un supporto per modello di robot (virtual, mbot, nano )</p></li>
<li><dl>
<dt>Un modello qak:</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">System</span>  <span class="o">/*</span> <span class="o">-</span><span class="n">trace</span>  <span class="o">*/</span>   <span class="n">basicrobot22</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
<section id="lo-step">
<h4>Lo step<a class="headerlink" href="#lo-step" title="Permalink to this headline">¶</a></h4>
<p>Si intende sperimentare la realizzazione della mossa <code class="docutils literal notranslate"><span class="pre">step(T)</span></code> in diversi modi:</p>
<ol class="arabic">
<li><p>in modo sincrono, usando una operazione simile a <a class="reference internal" href="Applicazione1-WS.html#vrobothlmovesws-request"><span class="std std-ref">VrobotHLMovesWS.request</span></a></p></li>
<li><p>in modo asincrono, seguendo il modello di <a class="reference internal" href="Applicazione1-WS.html#vrobothlmovesws-stepasynch"><span class="std std-ref">VrobotHLMovesWS.stepAsynch</span></a> ma trasformando l’esito positivo in un
messaggio (<em>dispatch</em>) <code class="docutils literal notranslate"><span class="pre">stepdone</span></code> e l’esito negativo in un messaggio (<em>dispatch</em>) <code class="docutils literal notranslate"><span class="pre">stepfail</span></code></p></li>
<li><p>in modo asincrono, considerando lo <code class="docutils literal notranslate"><span class="pre">step(T)</span></code> completato con successo se, entro il tempo <code class="docutils literal notranslate"><span class="pre">T</span></code>, non si percepisce
alcun messaggio  (<em>dispatch</em>) <code class="docutils literal notranslate"><span class="pre">obstacle</span></code> inviato dal supporto <a class="reference internal" href="#robotvirtual-virtualrobotsupport23"><span class="std std-ref">robotVirtual.virtualrobotSupport23</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>State doStep{
   onMsg( step : step( T ) ){
      [#  StepTime     = payloadArg(0).toLong()   #]
      updateResource [# &quot;step(${StepTime})&quot; #]
   }
  memoCurrentTime StartTime
  run unibo.robot.robotSupport.move( &quot;w&quot; )  //moves a real robot forever !!!
     }
     Transition t0 whenTimeVar StepTime  -&gt; stepDone
                        whenMsg  obstacle     -&gt; stepFail

State stepDone{
   run unibo.robot.robotSupport.move( &quot;h&quot; )
   ...
}
State stepFail{
   run unibo.robot.robotSupport.move( &quot;h&quot; )
   ...
}
</pre></div>
</div>
</li>
</ol>
</section>
<section id="robotvirtual-virtualrobotsupport23">
<h4>robotVirtual.virtualrobotSupport23<a class="headerlink" href="#robotvirtual-virtualrobotsupport23" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Unisce <code class="docutils literal notranslate"><span class="pre">robotVirtual.virtualrobotSupport2021</span></code>  e <code class="docutils literal notranslate"><span class="pre">robotVirtual.WsSupportObserver</span></code> in quanto estende
<a class="reference internal" href="unibo.basicomm23.html#applabstractobserver"><span class="std std-ref">ApplAbstractObserver</span></a> definito in <a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23"><span class="std std-ref">unibo.basicomm23</span></a></p></li>
<li><p>Realizza <code class="docutils literal notranslate"><span class="pre">step</span></code> invocando <code class="docutils literal notranslate"><span class="pre">request(forwardStepMsg)</span></code> che aspetta il risultato (<code class="docutils literal notranslate"><span class="pre">endmove</span></code> in <code class="docutils literal notranslate"><span class="pre">update</span></code>)
che può essere <code class="docutils literal notranslate"><span class="pre">true/false</span></code></p></li>
<li><p>Realizza <code class="docutils literal notranslate"><span class="pre">move(w)</span></code> mandando un <code class="docutils literal notranslate"><span class="pre">forwardlongtimeMsg</span></code> sulla <a class="reference internal" href="Interaction2021-HTTP-WS.html#wsconnection"><span class="std std-ref">WsConnection</span></a> al VirtualRobot.</p></li>
<li><p>La parte <em>observer</em> emette un evento <code class="docutils literal notranslate"><span class="pre">obstacle</span></code> alla detection di una <em>collisione</em></p></li>
</ul>
<p>Per sperimentare:</p>
<a class="reference internal image-reference" href="_images/withbasicrobot.png"><img alt="_images/withbasicrobot.png" src="_images/withbasicrobot.png" style="width: 60%;" /></a>
</section>
</section>
</section>
<section id="verso-altre-applicazioni">
<h2>Verso altre applicazioni<a class="headerlink" href="#verso-altre-applicazioni" title="Permalink to this headline">¶</a></h2>
<p>A questo punto, ampliamo i requsiti applicativi, secondo la sequenza che segue:</p>
<ol class="arabic simple">
<li><p>L’applicazione deve poter inviare a un componente remoto informazioni sul suo stato di elaborazione,
se un tale componente lo chiede.</p></li>
<li><p>L’applicazione deve poter inviare informazioni sul suo stato ad osservatori remoti (se esistono).</p></li>
<li><p>L’applicazione deve poter interrompere il suo  <code class="docutils literal notranslate"><span class="pre">walkAtBoundary</span></code> quando il robot passa davanti a un <em>sonar</em>
presente nella stanza, segnalare  a un operatore il suo stato di elaborazione e la distanza dal sonar e
deve poter ripartire quando l’operatore invia un comando <code class="docutils literal notranslate"><span class="pre">resume</span></code>.</p></li>
</ol>
<section id="stato-di-elaborazione">
<h3>Stato di elaborazione<a class="headerlink" href="#stato-di-elaborazione" title="Permalink to this headline">¶</a></h3>
<p>Per <span class="blue">stato di elaborazione</span>, intendiamo in questa fase il numero di passi effettuati e il numero di passi
ancora da compiere (se è possibile dedurlo)  per completare un giro.</p>
</section>
<section id="stato-del-robot">
<h3>Stato del robot<a class="headerlink" href="#stato-del-robot" title="Permalink to this headline">¶</a></h3>
<p>Per <span class="blue">statodel robot</span>, intendiamo infomazione sulla posizione e direzione corrent edal robot.
Si veda anche <a class="reference internal" href="Applicazione1.html#appl1-stato-del-robot"><span class="std std-ref">Appl1: Stato del robot</span></a>.</p>
</section>
<section id="richiesta-di-informazione-sullo-stato">
<h3>Richiesta di informazione sullo stato<a class="headerlink" href="#richiesta-di-informazione-sullo-stato" title="Permalink to this headline">¶</a></h3>
<p><span class="blue">Problematica</span>: non basta eseguire un comando remoto; occorre anche inviare informazioni di risposta.</p>
<ul class="simple">
<li><p>Il metodo <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-appl1msghandler"><span class="std std-ref">elaborate</span></a>
dell’handler dei mesaggi, può inviare messaggi di risposta al chiamante sulla <code class="docutils literal notranslate"><span class="pre">conn</span></code>, di tipo
<span class="xref std std-ref">Interaction2021</span>.</p></li>
<li><p>La risposta può essere confezionata introducendo un nuovo metodo  (<code class="docutils literal notranslate"><span class="pre">getState</span></code>) nel POJO applicativo</p></li>
<li><p>L’invio della risposta dovrebbe avvenire in un nuovo Thread, per evitare blocco dell’handler e quindi
del <a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-enablers-enablerasserver"><span class="std std-ref">EnablerAsServer</span></a></p></li>
</ul>
</section>
<section id="aggiornamento-di-osservatori-sullo-stato">
<h3>Aggiornamento di osservatori sullo stato<a class="headerlink" href="#aggiornamento-di-osservatori-sullo-stato" title="Permalink to this headline">¶</a></h3>
<p><span class="blue">Problematica</span>: l’applicazione deve poter sapere se ha osservatori remoti e con quali protocolli
comununicare con loro.</p>
<ul class="simple">
<li><p>Un modo per risolvere il problema è il seguente: l’applicazione può ricevere (con protocollo prefissato)
un messaggio di registrazione di un observer remoto e memorizzare la connessione su cui inviare gli update.</p></li>
<li><p>Un’altra soluzione è introdurre un observer locale dell’applicazione che invia informazioni
su una topic prefissata di un broker MQTT.</p></li>
</ul>
</section>
<section id="rilevazione-da-sonar">
<h3>Rilevazione da sonar<a class="headerlink" href="#rilevazione-da-sonar" title="Permalink to this headline">¶</a></h3>
<p><span class="blue">Problematica</span>: l’operatore deve utilizzare un componente capace
di ricevere informazioni da parte (di un observer) della applicazione e capace di inviare il comando <code class="docutils literal notranslate"><span class="pre">resume</span></code>.</p>
<ul class="simple">
<li><p>Dotiamo l’applicazione di una WEB interface in modo che un operatore possa accedervi usando un browser.
In pratica sostituiamo il nostro <a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-enablers-enablerasserver"><span class="std std-ref">EnablerAsServer</span></a>
con un WebServer (come Tomcat) e sfruttiamo piattaforme cone Node o SpringBoot.</p></li>
</ul>
</section>
</section>
<section id="un-nuovo-obiettivo">
<h2>Un nuovo obiettivo<a class="headerlink" href="#un-nuovo-obiettivo" title="Permalink to this headline">¶</a></h2>
<p>Mano a mano che i requisiti si ampliano, notiamo che lo scambio di messaggi diviene parte del core-business
applicativo, e che queste nuove, fondamentali parti vengono gestite all’interno dei server (come Tomcat) che abilitano
le comunicazioni o di altri componenti come gli handler dei messaggi.</p>
<p>Sorgono ora altri obiettivi:</p>
<ul class="simple">
<li><p>sostituire gli handler quali <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-appl1msghandler"><span class="std std-ref">Appl1MsgHandler</span></a>
con enti attivi (attori), capaci di gestire in modo ‘nativo’ (FIFO) messaggi inseriti nella coda di ingresso loro associata</p></li>
<li><p>passare da attori message-driven ad attori che operano come un Automa a stati finiti (FSM).</p></li>
</ul>
<p>In altre parole:</p>
<ul class="simple">
<li><p>E’ possibile impostare l’applicazione come attore che opera come un FSM le cui transizioni sono connesse alla ricezione
di un messaggio?</p></li>
<li><p>Cha vantaggi se ne ottengono?</p></li>
</ul>
<section id="xxx-iapplication1">
<h3>xxx IApplication1<a class="headerlink" href="#xxx-iapplication1" title="Permalink to this headline">¶</a></h3>
<p>Entrambe le versioni dell’applicazione sono concepite come un POJO <strong>oserervabile</strong> che implementa la seguente interfaccia:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IApplication1</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="p">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="p">();</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">resume</span><span class="p">();</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addAnObserverOnAppl</span><span class="p">(</span><span class="n">IObserver</span> <span class="n">o</span><span class="p">);</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addAnObserverOnWsconn</span><span class="p">(</span><span class="n">IObserver</span> <span class="n">o</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#metodi-start-stop-resume"><span class="std std-ref">start</span></a>: che attiva l’applicazione (nel Thread corrente);</p></li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#metodi-start-stop-resume"><span class="std std-ref">stop</span></a>: che ferma l’applicazione, se questa esegue <a class="reference internal" href="Applicazione1-HTTP-Core.html#walkbysteppingwithstop"><span class="std std-ref">walkBySteppingWithStop</span></a>;</p></li>
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#metodi-start-stop-resume"><span class="std std-ref">resume</span></a>: che riattiva l’applicazione.</p></li>
</ul>
<p>Ogni applicazione definisce anche:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Applicazione1-HTTP-Core.html#unibo-http-application1nostop"><span class="std std-ref">walkAtBoundary</span></a>, che pilota il robot a viaggiare per passi
(<a class="reference internal" href="Applicazione1-HTTP-Core.html#walkbystepping"><span class="std std-ref">walkByStepping</span></a> e <a class="reference internal" href="Applicazione1-HTTP-Core.html#walkbysteppingwithstop"><span class="std std-ref">walkBySteppingWithStop</span></a>) lungo i bordi perimetrali
(privi di ostacoli) della stanza virtuale.</p></li>
</ul>
<p>Per fermarsi e ripartire, l’applicazione fa uso del <span class="blue">semaforo</span> <code class="docutils literal notranslate"><span class="pre">stopped</span></code>
(si veda <a class="reference internal" href="Applicazione1-HTTP-Core.html#walkbysteppingwithstop"><span class="std std-ref">walkBySteppingWithStop</span></a>).</p>
<p>Il tramite tra il server e l’applicazioe è costituto da un oggetto
di classe <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-appl1msghandler"><span class="std std-ref">Appl1MsgHandler</span></a>,
il cui metodo <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#unibo-appl1-interaction-appl1msghandler"><span class="std std-ref">elaborate</span></a> viene
invocato alla ricezione di un messaggio da
<a class="reference internal" href="unibo.basicomm23.html#unibo-basicomm23-enablers-enablerasserver"><span class="std std-ref">EnablerAsServer</span></a>,
che in questo modo delega a un componente applicativo il compito di gestire il messaggio.</p>
<p>La gstione del messaggio <code class="docutils literal notranslate"><span class="pre">start</span></code> induce l’handler a invocare il metodo <code class="docutils literal notranslate"><span class="pre">walkAtBoundary()</span></code> dell’applicazione
all’interno di un nuovo Thread, per evitare il blocco del server e l’impossibilità di elaborare
altri messaggi (nel caso particolare, lo <code class="docutils literal notranslate"><span class="pre">stop</span></code>).</p>
</section>
<section id="xxx-application1abstractbase">
<h3>xxx Application1AbstractBase<a class="headerlink" href="#xxx-application1abstractbase" title="Permalink to this headline">¶</a></h3>
<p><em>Application1AbstractBase</em> implementa <a class="reference internal" href="Applicazione1-HTTP-Distribuita.html#iapplication1"><span class="std std-ref">IApplication1</span></a> e definisce i seguenti metodi <code class="docutils literal notranslate"><span class="pre">protected</span></code>, usando una istanza
di <a class="reference internal" href="Applicazione1-WS.html#unibo-supports-vrobothlmovesws"><span class="std std-ref">VrobotHLMovesWS</span></a>:</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="blue">abstract void doJob()</span> throws Exception: comportamento definito da classi specializzate</p></li>
<li><p>boolean reachPos(int stepT, int x, int y) throws Exception</p></li>
<li><p>void completeTheMap() throws Exception</p></li>
<li><p>boolean executePlan(List&lt;Action&gt; actions) throws Exception</p></li>
<li><p>void backToHome() throws Exception</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Verso-sistemi-distribuiti</a><ul>
<li><a class="reference internal" href="#history">History</a><ul>
<li><a class="reference internal" href="#parte-preliminare">1 - Parte preliminare</a></li>
<li><a class="reference internal" href="#interconnessione">2 - Interconnessione</a></li>
<li><a class="reference internal" href="#supporti-hl-per-robot">3 - Supporti HL per robot</a></li>
<li><a class="reference internal" href="#l-applicazione1">4 - L’Applicazione1</a><ul>
<li><a class="reference internal" href="#comandi-con-risposta">Comandi con risposta</a></li>
</ul>
</li>
<li><a class="reference internal" href="#supporti-hl-per-robot-con-planner">5 -  Supporti HL per robot con planner</a></li>
<li><a class="reference internal" href="#applicazioni-con-planner">6 - Applicazioni con planner</a><ul>
<li><a class="reference internal" href="#application1explorebycolumn">Application1ExploreByColumn</a></li>
<li><a class="reference internal" href="#application1explorespiral">Application1ExploreSpiral</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#basicrobot">7 - basicrobot</a><ul>
<li><a class="reference internal" href="#progetto-unibo-basicrobo22">Progetto unibo.basicrobo22</a><ul>
<li><a class="reference internal" href="#lo-step">Lo step</a></li>
<li><a class="reference internal" href="#robotvirtual-virtualrobotsupport23">robotVirtual.virtualrobotSupport23</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#verso-altre-applicazioni">Verso altre applicazioni</a><ul>
<li><a class="reference internal" href="#stato-di-elaborazione">Stato di elaborazione</a></li>
<li><a class="reference internal" href="#stato-del-robot">Stato del robot</a></li>
<li><a class="reference internal" href="#richiesta-di-informazione-sullo-stato">Richiesta di informazione sullo stato</a></li>
<li><a class="reference internal" href="#aggiornamento-di-osservatori-sullo-stato">Aggiornamento di osservatori sullo stato</a></li>
<li><a class="reference internal" href="#rilevazione-da-sonar">Rilevazione da sonar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#un-nuovo-obiettivo">Un nuovo obiettivo</a><ul>
<li><a class="reference internal" href="#xxx-iapplication1">xxx IApplication1</a></li>
<li><a class="reference internal" href="#xxx-application1abstractbase">xxx Application1AbstractBase</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Verso-sistemi-distribuiti.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">iss23 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Verso-sistemi-distribuiti</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Antonio Natali.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>